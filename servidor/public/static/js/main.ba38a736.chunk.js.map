{"version":3,"sources":["components/TaleEditor/stateful/TaleImage.jsx","services/galeria-service.js","components/TaleEditor/stateless/ImageCard.jsx","components/TaleEditor/stateful/gallerySelect.jsx","services/book-service.js","components/TaleEditor/stateful/form.jsx","components/TaleEditor/stateful/TaleText.jsx","components/TaleEditor/stateless/TransformerComp.jsx","components/TaleEditor/stateful/TalesEditor.jsx","components/pruebaCuadrados.jsx","components/Inicio/Index.jsx","services/auth-services.js","components/Inicio/auth/logForms.jsx","components/Inicio/BookForm.jsx","components/NavBar.jsx","services/profile-services.js","components/Profile/Book-card.jsx","components/Profile/BookSearch.jsx","components/Profile/User-info.jsx","components/Profile/Profile.jsx","components/protected-route.jsx","App.js","serviceWorker.js","index.js"],"names":["TaleImage","_Component","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleLoad","setState","image","imageURL","src","status","handleDragStart","e","target","setAttrs","shadowOffset","x","y","scaleX","scaleY","handleDragEnd","to","duration","easing","Konva","Easings","ElasticEaseOut","shadowOffsetX","shadowOffsetY","positionX","attrs","positionY","state","rotation","image_id","inherits","createClass","key","value","loadImage","imageNode","getLayer","batchDraw","oldProps","removeEventListener","window","Image","crossOrigin","addEventListener","_this2","go","salvarImagen","goFunction","_this$state","react_default","a","createElement","ReactKonva","draggable","shadowBlur","shadowOpacity","onDragStart","onDragEnd","ref","node","Component","services","getGallery","service","get","then","res","data","catch","err","console","log","getImageGallery","id","concat","postImageGallery","post","postImagePage","handleUpload","theFile","append","axios","create","baseURL","process","withCredentials","ImageCard","className","alt","name","onClick","nuevaImg","ModalGallery","context","handleShow","bind","assertThisInitialized","handleClose","searchImage","gallery","filtered","search","show","query","GalleryServices","allImages","filter","img","includes","_this3","Fragment","Button_default","variant","Modal_default","onHide","Header","closeButton","Title","Body","InputGroup_default","Prepend","Text","FormControl_default","placeholder","aria-label","aria-describedby","onChange","length","map","theImage","idx","stateless_ImageCard","assign","postNewBook","book","postNewPage","page","postNewText","text","booksList","UploadPage","FormDesign","handleChange","_e$target","defineProperty","handleFileUpload","uploadData","FormData","files","handleSubmit","preventDefault","response","imageURLBack","handleSubmitChar","imageURLCharDos","handleSubmitText","taleText","imageURLChar","taleTextColor","servicesBook","BookServices","onSubmit","type","gallerySelect_ModalGallery","FormSave","_Component2","savePage","TaleText","content","text_id","_id","saveText","fontSize","fill","color","TransformerComponent","checkNode","stage","transformer","getStage","selectedShapeName","selectedNode","findOne","attachTo","detach","getGroup","React","TalesEditor","handleStageClick","addNewImg","_page","objectSpread","imageBackground","imageCharacter","push","texts","saveImageToPage","ImageState","imageCreated","pageToSave","newArr","toConsumableArray","imageCharacters","saveTextToPage","TextState","textCreated","setTimeout","_pageToSave","bookId","getTheBookId","savePageImage","pageNumber","undefined","pagesToView","test","refs","toDataURL","pixelRatio","form_FormDesign","form_FormSave","saveToBook","width","innerWidth","height","innerHeight","TaleImage_TaleImage","i","stateful_TaleText","TransformerComp","saveImagesToBook","Rect1","Rect2","Rectangulo","_React$Component2","_getPrototypeOf2","_len","arguments","args","Array","_key","apply","pruebaCuadrados_Rect1","pruebaCuadrados_Rect2","pruebaCuadrados_TransformerComponent","Index","pruebaCuadrados_Rectangulo","signup","username","email","password","login","logout","loggedin","SingUp","user","_this$state$user","setTheUser","error","AuthServices","as","size","Login","_e$target2","_this2$state$user","Footer","BookForm","setRedirect","redirect","renderRedirect","react_router","theName","setTheBookId","book_id","NavBar","react_router_dom","BookForm_BookForm","logForms_SingUp","logForms_Login","uploadProfile","BookCard","es_Button","SearchBooks","searchBook","books","allBooks","Book_card_BookCard","UserInfo","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","entries","Symbol","iterator","next","done","prop","return","user_id","profilePhoto","handleUser","ProfileService","close","Profile","updatePhoto","loggedInUser","User_info_UserInfo","BookSearch_SearchBooks","protectedRoute","_ref","component","rest","objectWithoutProperties","render","pathname","App","setUser","userObj","fetchUser","NavBar_NavBar","path","exact","TalesEditor_TalesEditor","protected_route","Boolean","location","hostname","match","ReactDOM","App_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ba38a736.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Image } from 'react-konva';\nimport Konva from 'konva'\n\n\n// custom component that will handle loading image from url\n// you may add more logic here to handle \"loading\" state\n// or if loading is failed\n// VERY IMPORTANT NOTES:\n// at first we will set image state to null\n// and then we will set it to native image instance when it is loaded\nexport class TaleImage extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      image: null,\n      imageURL: '',\n      positionX: 100,\n      positionY: 100,\n      rotation: 0,\n      status: '',\n      image_id: ''\n    };\n\n  }\n  componentDidMount() {\n    this.loadImage();\n    this.imageNode.getLayer().batchDraw();\n  }\n  componentDidUpdate(oldProps) {\n    if (oldProps.src !== this.props.src) {\n      this.loadImage();\n    }\n\n\n  }\n  componentWillUnmount() {\n    this.image.removeEventListener('load', this.handleLoad);\n  }\n  loadImage() {\n    // save to \"this\" to remove \"load\" handler on unmount\n    this.image = new window.Image();\n    this.image.src = this.props.src;\n    this.image.crossOrigin = \"Anonymous\"\n    this.image.addEventListener('load', this.handleLoad);\n  }\n  handleLoad = () => {\n    // after setState react-konva will update canvas and redraw the layer\n    // because \"image\" property is changed\n    // console.log(this.image, 'soy this.image')\n    this.setState({\n      // ...this.state,\n      image: this.image,\n      imageURL: this.image.src,\n      status: this.props.status\n    });\n    // if you keep same image object during source updates\n    // console.log(this.state)\n    // you will have to update layer manually:\n    // this.imageNode.getLayer().batchDraw();\n  };\n  handleDragStart = e => {\n    e.target.setAttrs({\n      shadowOffset: {\n        x: 15,\n        y: 15\n      },\n      scaleX: 1.1,\n      scaleY: 1.1\n    });\n  };\n  handleDragEnd = e => {\n\n    e.target.to({\n      duration: 0.5,\n      easing: Konva.Easings.ElasticEaseOut,\n      scaleX: 1,\n      scaleY: 1,\n      shadowOffsetX: 5,\n      shadowOffsetY: 5\n    });\n    this.setState({\n      positionX: e.target.attrs.x,\n      positionY: e.target.attrs.y\n\n    })\n\n\n\n    // console.log(e.target)\n    // console.log(e.target.attrs.x + ' pos X')\n    // console.log(e.target.attrs.y + ' pos Y')\n\n  };\n\n\n\n  render() {\n    if (this.props.go) {\n      this.props.salvarImagen(this.state, this.props.status)\n      // console.log(this.state, 'estoy en taleImage mandando state')\n      this.props.goFunction(false)\n    }\n    const { positionX, positionY, rotation, image } = this.state\n\n\n    return (\n      <Image\n        // key={image._id}\n        x={positionX}\n        y={positionY}\n\n        //Para mover la imagen\n        draggable\n        rotation={rotation}\n\n        shadowBlur={10}\n        shadowOpacity={0.6}\n        onDragStart={this.handleDragStart}\n        onDragEnd={this.handleDragEnd}\n\n        image={image}\n        ref={node => {\n          this.imageNode = node;\n        }\n\n        }\n      />\n    );\n  }\n}\n\n","import axios from 'axios'\n\nexport default class services {\n\n  constructor() {\n\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_URL}api/galeria`,\n      withCredentials: true\n    })\n  }\n\n  getGallery = () => {\n\n    return this.service.get('/')\n      .then(res => res.data)\n      .catch(err => console.log('Error', err))\n  }\n\n\n  getImageGallery = id => {\n    return this.service.get(`/${id}`)\n      .then(res => res.data)\n      .catch(err => console.log('Error', err))\n  }\n\n\n  postImageGallery = image => {\n    //console.log(image, '----------------------gallery con status--------------')\n    return this.service.post('/addImage/', image)\n      .then(res => res.data)\n      .catch(err => console.log(err))\n  }\n\n  postImagePage = image => {\n    return this.service.post('/addImagePage', image)\n      .then(res => res.data)\n      .catch(err => console.log(err))\n  }\n\n  handleUpload = (theFile, status) => {\n    console.log(theFile, '----------------------gallery con status--------------')\n    theFile.append(\"status\", status);\n    return this.service.post('/upload', theFile)\n      .then(res => res.data)\n      .catch(err => console.log(err));\n  }\n\n\n}\n","import React, { Component } from 'react'\n\n\n\n\n\n\n\nexport class ImageCard extends Component {\n\n  constructor(props) {\n    super(props)\n\n\n  }\n\n\n\n\n  render() {\n    // console.log(this.props)\n    return (\n      <div className=\"card-image\">\n        <article className=\"card\">\n          <img className=\"card-img-top\" src={this.props.imageURL} alt={this.props.name} />\n          <header className=\"card-body\">\n            <h5 className=\"card-title\">{this.props.name}</h5>\n            {/*  <Link className=\"btn btn-sm btn-outline-dark\" to={`/coasters/${theImage._id}`}> Seleccionar </Link> */}\n\n\n            <button onClick={() => this.props.nuevaImg(this.props.imageURL, this.props.status)}>Seleccionar imagen</button>\n          </header>\n        </article>\n      </div>\n    )\n  }\n\n\n}\n\nexport default ImageCard\n\n\n\n\n\n\n\n\n","import React, { Component } from 'react'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport FormControl from 'react-bootstrap/FormControl'\nimport ImageCard from '../stateless/ImageCard'\nimport GalleryServices from '../../../services/galeria-service'\n\nexport class ModalGallery extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.handleShow = this.handleShow.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.searchImage = this.searchImage.bind(this);\n\n\n    this.state = {\n      gallery: [],\n      filtered: [],\n      search: \"\",\n\n      show: false,\n      query: \"\",\n    }\n    this.services = new GalleryServices()\n  }\n\n  componentDidMount() {\n    this.services.getGallery()\n      .then(allImages => this.setState({ gallery: allImages }))\n  }\n\n  searchImage(e) {\n    // console.log(this.state.gallery)\n    this.setState({ query: e.target.value })\n    let filtered = this.state.gallery.filter(img => img.name.includes(e.target.value))\n    // console.log(filtered)\n    this.setState({ filtered })\n  }\n\n\n  handleClose() {\n    this.setState({ show: false });\n  }\n\n  handleShow() {\n    this.setState({ show: true });\n  }\n\n  render() {\n    // console.log(this.state)\n    return (\n      <>\n        <Button variant=\"light\" onClick={this.handleShow}>\n          Galería imagenes\n            </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n\n          <Modal.Header closeButton>\n            <Modal.Title>Galeria de imagenes</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <form>\n              <InputGroup className=\"mb-3\">\n                <InputGroup.Prepend>\n                  <InputGroup.Text id=\"basic-addon1\">Buscar</InputGroup.Text>\n                </InputGroup.Prepend>\n                <FormControl\n                  placeholder=\"busca una imagen\"\n                  aria-label=\"gallery\"\n                  aria-describedby=\"basic-addon1\"\n                  value={this.state.query}\n                  onChange={this.searchImage}\n                />\n              </InputGroup>\n            </form>\n            <div>\n\n              {this.state.query.length ?\n\n                this.state.filtered.map((theImage, idx) => <ImageCard key={idx} nuevaImg={this.props.nuevaImg} status={this.props.status} {...theImage} go={this.state.go} goFunction={this.go} />)\n\n                :\n\n                this.state.gallery.map((theImage, idx) => <ImageCard key={idx} nuevaImg={this.props.nuevaImg} {...theImage} go={this.state.go} goFunction={this.go} />)\n\n              }\n\n            </div>\n          </Modal.Body>\n\n        </Modal>\n      </>\n    );\n  }\n\n}","import axios from 'axios'\n\nexport default class services {\n\n  constructor() {\n\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_URL}api/cuentos`,\n      withCredentials: true\n    })\n  }\n\n  postNewBook = book => {\n    return this.service.post('/newBook', book)\n      .then(res => {\n        console.log(res.data)\n        return res.data\n      })\n      .catch(err => console.log(err))\n  }\n\n\n  postNewPage = (page) => {\n    //console.log(page)\n    return this.service.post(`/addPage`, page)\n      .then(res => res.data)\n      .catch(err => console.log(err))\n  }\n\n  postNewText = (text) => {\n    return this.service.post('/addText', text)\n      .then(res => {\n        // console.log(\"el texto que vuelve de la BBDD\", res.data)\n        return res.data\n      })\n      .catch(err => console.log(err))\n  }\n\n  booksList = book => {\n    return this.service.get('/', book)\n      .then(res => res.data)\n      .catch(err => console.log('Error', err))\n  }\n\n\n  UploadPage = (theFile, id) => {\n    return this.service.post(`/upload/page/${id}`, theFile)\n      .then(res => res.data)\n      .catch(err => console.log(err));\n  }\n}\n\n\n\n\n\n\n\n/* getGallery = () => {\n\n return this.service.get('/')\n   .then(res => res.data)\n   .catch(err => console.log('Error', err))\n}\n\n\ngetImageGallery = id => {\n return this.service.get(`/${id}`)\n   .then(res => res.data)\n   .catch(err => console.log('Error', err))\n}\n\n\npostImageGallery = image => {\n return this.service.post('/addImage/', image)\n   .then(res => res.data)\n   .catch(err => console.log(err))\n}\n\npostImagePage = image => {\n return this.service.post('/addImagePage', image)\n   .then(res => res.data)\n   .catch(err => console.log(err))\n}\n\nhandleUpload = theFile => {\n\n return this.service.post('/upload', theFile)\n   .then(res => res.data)\n   .catch(err => console.log(err));\n}\n} */","import React, { Component } from 'react'\nimport GalleryServices from '../../../services/galeria-service'\nimport { ModalGallery } from './gallerySelect'\nimport BookServices from '../../../services/book-service'\n\nexport class FormDesign extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            imageURL: \"\",\n            imageURLChar: '',\n            taleText: \"\",\n            taleTextColor: \"\",\n            status: \"\"\n        }\n\n        this.services = new GalleryServices()\n        this.servicesBook = new BookServices()\n    }\n\n    handleChange = e => {\n        const { name, value } = e.target\n        this.setState({\n\n            [name]: value\n\n        }, () => console.log(this.state + 'soy handleChange'))\n        // console.log(this.state + 'sigo siendo handleChange')\n    }\n\n    handleFileUpload = (e) => {\n\n        const uploadData = new FormData();\n        uploadData.append(\"imageUrl\", e.target.files[0]);\n\n        this.setState({\n            data: uploadData,\n\n        })\n        console.log(this.props.status)\n\n        // console.log(this.state)\n\n    }\n\n\n    // handleFileCharacterUpload = e => {\n\n    //     const uploadData = new FormData();\n    //     uploadData.append(\"imageUrl\", e.target.files[0]);\n    //     console.log(e.target.files[0])\n    //     this.services.handleUpload(uploadData)\n    //         .then(response => {\n    //             console.log(response.data[0].imageURL)\n    //             this.setState({\n    //                 characterImageURLBack: response.data[0].imageURL\n\n    //             })\n    //             console.log(this.state.imageURLBack)\n    //         })\n    //         .catch(err => console.log(err))\n    // }\n\n\n    handleSubmit = (e) => {\n        console.log('yo soy el primero de handleSubmit  ' + this.state.data[0] + 'en medio data')\n        e.preventDefault()\n        console.log(\"===========================\")\n        this.services.handleUpload(this.state.data, \"background\")\n            .then(response => {\n                // console.log(response, 'estoy en el then de services')\n\n                this.props.nuevaImg(response.imageURL, 'background')\n\n                // console.log(status, 'soy el status')\n                this.setState({\n                    imageURLBack: response.imageURL\n                })\n            })\n            .catch(err => console.log(err))\n    }\n\n\n\n\n\n    handleSubmitChar = (e) => {\n        // console.log('yo soy el primero de handleSubmitCHAR  ' + this.state.data + 'en medio data')\n        e.preventDefault()\n\n        this.services.handleUpload(this.state.data, \"character\")\n            .then(response => {\n                console.log(response, 'estoy en el then de services')\n\n                this.props.nuevaImg(response.imageURL, 'character')\n\n                console.log(response.imageURL, 'yo tb estoy en el then, pero despues')\n                this.setState({\n                    imageURLCharDos: response.imageURL\n                })\n            })\n            .catch(err => console.log(err))\n\n        console.log(this.state, this.state.imageURLCharDos, \"soy el de teo 2\")\n\n    }\n\n\n    handleSubmitText = (e) => {\n        // console.log('yo soy el primero de handleSubmitText  ' + this.state.data + 'en medio data')\n        e.preventDefault()\n\n        // this.servicesBook.postNewText(this.state.taleText)\n        //     .then(response => {\n        //         console.log(response, 'estoy en el then de services')\n\n        this.props.nuevaImg(this.state.taleText)\n\n        // console.log(status, 'soy el status')\n        this.setState({\n            taleText: this.state.taleText\n        })\n        // })\n        // .catch(err => console.log(err))\n    }\n\n\n\n\n\n\n\n    render() {\n        return (\n\n            <div>\n\n                <form onSubmit={(e) => this.handleSubmit(e)} className='toolbar'>\n                    <input onChange={this.handleFileUpload} type=\"file\" name=\"imageURL\" id=\"imageURL\" placeholder='Pega la URL' value={this.state.imageURL} status='background' /> <br />\n                    <button>Añadir fondo</button><br />\n                    <ModalGallery nuevaImg={this.props.nuevaImg} status=\"background\" go={this.state.go} goFunction={this.go} />\n\n                </form>\n\n\n                <form onSubmit={(e) => this.handleSubmitChar(e)} className='toolbar'>\n\n                    <input type=\"file\" name=\"imageURLChar\" id=\"imageURLChar\" placeholder='Pega la URL' value={this.state.imageURLChar} onChange={this.handleFileUpload} status='character' /><br />\n                    <button>Añadir personaje</button><br />\n                    <ModalGallery nuevaImg={this.props.nuevaImg} go={this.state.go} goFunction={this.go} status='character' />\n                </form>\n\n                <form onSubmit={(e) => this.handleSubmitText(e, \"taleText\")} className='toolbar'>\n\n                    <input type=\"text\" name=\"taleText\" id=\"taleText\" placeholder='Escribe tu cuento' value={this.state.taleText} onChange={this.handleChange} /><br />\n                    <button>Escribe tu cuento</button><br />\n\n                </form>\n\n                <form className='toolbar'>\n\n                    <input type=\"color\" name=\"taleTextColor\" id=\"taleTextColor\" value={this.state.taleTextColor} onChange={this.handleChange} /><br />\n                    <button>Elige color del texto</button><br />\n                </form>\n\n            </div>\n        )\n    }\n}\n\n\n\n\n\n\n\nexport class FormSave extends Component {\n    constructor(props) {\n        super(props)\n        this.services = new GalleryServices()\n\n    }\n\n\n\n    handleSubmit = e => {\n        e.preventDefault()\n        // console.log('llega a submit form')\n        this.props.savePage()\n        this.props.go(true)\n\n        // console.log('ejecuto go')\n        // this.props.saveToBook()\n    }\n\n\n\n\n    render() {\n        return (\n            <form onSubmit={this.handleSubmit}>\n                <button>Guarda tu cuento</button>\n            </form>\n        )\n    }\n}\n\n","import React, { Component } from 'react';\nimport Konva from 'konva'\nimport { Text } from 'react-konva'\n\nclass TaleText extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      content: this.props.text,\n      positionX: 100,\n      positionY: 100,\n      text_id: this.props._id\n    };\n  }\n  /* this.textNode = new Konva.Text({\n    text: 'Some text here',\n    x: 50,\n    y: 80,\n    fontSize: 20,\n    draggable: true,\n    width: 200\n  });\n\n  this.tr = new Konva.Transformer({\n    node: textNode,\n    enabledAnchors: ['middle-left', 'middle-right'],\n    // set minimum width of text\n    boundBoxFunc: function (oldBox, newBox) {\n      newBox.width = Math.max(30, newBox.width);\n      return newBox;\n    }\n  }) */\n\n\n  handleDragStart = e => {\n    e.target.setAttrs({\n      shadowOffset: {\n        x: 0,\n        y: 0\n      },\n      scaleX: 1.1,\n      scaleY: 1.1\n    });\n  };\n  handleDragEnd = e => {\n\n    e.target.to({\n      duration: 0.5,\n      easing: Konva.Easings.ElasticEaseOut,\n      scaleX: 1,\n      scaleY: 1,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0\n    });\n    this.setState({\n      positionX: e.target.attrs.x,\n      positionY: e.target.attrs.y\n\n    })\n    // console.log(e.target.attrs.x, this.state.positionX)\n    // console.log(e.target.attrs.y, this.state.positionY)\n\n  }\n\n\n  render() {\n\n    if (this.props.go) {\n      // console.log('entro en taleText para salvar texto')\n      this.props.saveText(this.state)\n      // console.log(this.state)\n      this.props.goFunction(false)\n    }\n    const { content, positionX, positionY } = this.state\n\n    return (\n      <React.Fragment>\n\n        <Text\n          text={content}\n          x={positionX}\n          y={positionY}\n          fontSize={20}\n          onDragStart={this.handleDragStart}\n          onDragEnd={this.handleDragEnd}\n          draggable\n          fill={this.props.color}\n        />\n\n      </React.Fragment>\n    );\n  }\n}\n\nexport default TaleText","import React from \"react\";\nimport { Stage, Layer, Rect, Transformer } from \"react-konva\";\n\n\n\nclass TransformerComponent extends React.Component {\n\n\n  componentDidMount() {\n    this.checkNode();\n  }\n  componentDidUpdate() {\n    this.checkNode();\n  }\n  checkNode() {\n    const stage = this.transformer.getStage();\n    const { selectedShapeName } = this.props;\n    // console.log(selectedShapeName)\n    const selectedNode = stage.findOne(\".\" + selectedShapeName);\n    if (selectedNode === this.transformer.node()) {\n      return;\n    }\n    if (selectedNode) {\n      this.transformer.attachTo(selectedNode);\n    } else {\n      this.transformer.detach();\n    }\n    this.transformer.getGroup().batchDraw();\n  }\n  render() {\n    return (\n      <Transformer\n        ref={node => {\n          this.transformer = node;\n        }}\n      />\n    );\n  }\n}\n\n\nexport default TransformerComponent ","import React, { Component } from 'react';\nimport { TaleImage } from './TaleImage'\nimport { Stage, Layer, Group } from 'react-konva';\n\nimport { FormDesign, FormSave } from '../stateful/form'\nimport TaleText from './TaleText'\nimport GalleryServices from '../../../services/galeria-service'\nimport BookServices from '../../../services/book-service'\nimport Konva from 'konva';\nimport TransformerComponent from '../stateless/TransformerComp'\n\n\n\n\n\nexport class TalesEditor extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      page: {\n        book: '',\n        texts: [],\n        imageBackground: '',\n        imageCharacter: [],\n        pageNumber: ''\n      },\n      pageToSave: {\n        bookId: \"\",\n        texts: [],\n        imageBackground: undefined,\n        imageCharacters: [],\n      },\n      book: {\n        pagesToView: []\n      },\n      go: false,\n      selectedShapeName: \"\"\n\n    }\n    this.services = new GalleryServices()\n    this.servicesBook = new BookServices()\n  }\n\n  handleStageClick = e => {\n    console.log(e.target)\n    console.log(e.target._id)\n    this.setState({\n      selectedShapeName: e.target.name()\n    });\n  };\n\n\n  addNewImg = (image, status) => {\n    let _page = { ...this.state.page }\n    if (status === 'background') {\n      _page.imageBackground = image\n    } else if (status === 'character') {\n      // console.log(image)\n      _page.imageCharacter.push(image)\n    } else {\n      _page.texts.push(image)\n    }\n\n    // console.log(image, _page, \"he llegado al back!\")\n\n    this.setState({\n      page: _page\n    })\n  }\n\n  componentDidMount() {\n\n  }\n\n\n\n  //asignar el id del libro a la pagina\n\n  /* addBookId = book_id => {\n\n    let _page = { ...this.state.page }\n    _page.book = book_id\n    this.setState({\n      page: _page\n    })\n  } */\n\n\n  saveImageToPage = (ImageState, status) => {\n    // console.log(ImageState, 'guardando imagen de la pagina con su posicion')\n    this.services.postImagePage(ImageState)\n      .then(imageCreated => {\n        if (imageCreated.status === \"background\") {\n          this.setState({ pageToSave: { ...this.state.pageToSave, imageBackground: imageCreated._id } })\n        } else {\n          const newArr = [...this.state.pageToSave.imageCharacters]\n          newArr.push(imageCreated._id)\n          // console.log(newArr)\n          this.setState({ pageToSave: { ...this.state.pageToSave, imageCharacters: newArr } })\n        }\n        // console.log(imageCreated)\n      })\n\n  }\n\n\n  saveTextToPage = TextState => {\n    // console.log(TextState, 'entro en services')\n\n    this.servicesBook.postNewText(TextState)\n      .then(textCreated => {\n        const newArr = [...this.state.pageToSave.texts]\n        newArr.push(textCreated._id)\n        // console.log(newArr)\n        this.setState({ pageToSave: { ...this.state.pageToSave, texts: newArr } })\n\n      })\n\n\n  }\n\n  savePage = () => {\n\n    setTimeout(() => {\n      console.log(this.state)\n\n      // console.log(\"salvado de pagina\", this.state.pageToSave)\n      const _pageToSave = { ...this.state.pageToSave };\n      _pageToSave.bookId = this.props.getTheBookId\n\n      this.savePageImage()\n\n      // console.log(_pageToSave)\n      // console.log(\"===================================================================================\")\n      this.servicesBook.postNewPage(_pageToSave)\n        .then(res => {\n          //console.log(\"--------------SAVE PAGE----------------\")\n          //console.log(res)\n          this.setState({\n            page: {\n              book: '',\n              texts: [],\n              imageBackground: \"\",\n              imageCharacter: [],\n              pageNumber: ''\n            },\n            pageToSave: {\n              bookId: \"\",\n              texts: [],\n              imageBackground: undefined,\n              imageCharacters: [],\n            },\n          })\n\n        })\n    }, 3000)\n\n  }\n\n\n\n  go = res => {\n    // console.log('me ejecuto')\n    this.setState({ go: res })\n  }\n\n  // PageImageToBook = (img) => {\n  //   this.setState({\n  //     ...this.state.book.pagesToView.push(img),\n\n  //   })\n  //console.log(img, this.state.book)\n  // }\n\n  handleFileUpload = (e) => {\n\n    const uploadData = new FormData();\n    uploadData.append(\"imageUrl\", e.target.files[0]);\n\n    this.setState({\n      data: uploadData,\n\n    })\n    console.log(this.props.status)\n\n    // console.log(this.state)\n  }\n\n  savePageImage() {\n\n    //FUNCIÓN POR SI QUEREMOS DESCARGAR LAS IMÄGENES AL ORDENADOR\n    // function downloadURI(uri, name) {\n    //   var link = document.createElement('a');\n    //   link.download = name;\n    //   link.href = uri;\n    //   document.body.appendChild(link);\n    //   link.click();\n    //   document.body.removeChild(link);\n    // }\n\n\n    const stage = this.refs.stage.getStage()\n    const test = stage.toDataURL({ pixelRatio: 2 })\n    // LLAMADA FUNCIÓN DESCARGAR: downloadURI(test, 'stage.png');\n    console.log(this.state.data)\n    this.servicesBook.handleFileUpload(this.state.data, \"character\")\n      .then(response => {\n        console.log(response, 'estoy en el then de services')\n        console.log(test)\n          //setstate\n\n          .catch(err => console.log('Error', err))\n      })\n    // NOTA SUBIR ESTO A CLOUDINARY Y GUARDAR LA URL DE LA IMAGEN RESULTANTE EN EL ARRAY \n    // DE IMÁGENES DE PÁGINAS DEL MODELO DE BOOK \n\n    // NOTA 2 IMÁGENES DE BACKGROUND QUE SE SUBEN DOBLES\n\n    //NOTA 3  MIRAR CÓMO BORRAR IMÁGENES Y TEXTOS CUANDO TE ARREPIENTES\n  }\n\n\n\n\n\n\n\n  render() {\n    return (\n      <div className=\"flex-editor\" >\n        {/* {console.log(this.state.page, \"statepage\")} */}\n        < FormDesign nuevaImg={this.addNewImg} />\n        <FormSave go={this.go} savePage={this.savePage} saveToBook={this.savePageImage} />\n\n        <Stage width={window.innerWidth / 1.2} height={window.innerHeight / 1.2} ref=\"stage\" onClick={this.handleStageClick}>\n          {/* ref={node => this.stage = node} */}\n          <Layer  >\n            <Group ref=\"grupito\" >\n\n              <TaleImage src={this.state.page.imageBackground} go={this.state.go} goFunction={this.go} salvarImagen={this.saveImageToPage} status={\"background\"} />\n\n              {this.state.page.imageBackground ?\n                <TaleImage src={this.state.page.imageBackground} go={this.state.go} goFunction={this.go} salvarImagen={this.saveImageToPage} status={\"background\"} />\n                :\n                null\n              }\n              {this.state.page.imageCharacter.map((img, idx) => {\n                return <TaleImage key={idx} src={img} go={this.state.go} goFunction={this.go} salvarImagen={this.saveImageToPage} status={\"character\"} />\n              })}\n\n              {this.state.page.texts.map((text, i) => <TaleText key={i} text={text} go={this.state.go} color={this.state.page.taleTextColor} goFunction={this.go} saveText={this.saveTextToPage} />)}\n\n              <TransformerComponent\n                selectedShapeName={this.state.selectedShapeName} />\n            </Group>\n          </Layer>\n        </Stage>\n        <button type='submit' onClick={this.saveImagesToBook}>Push img</button>\n      </div>\n\n    );\n  }\n}","import React from \"react\";\nimport { Stage, Layer, Rect, Transformer } from \"react-konva\";\n\nconst Rect1 = () => (\n  <Rect\n    name=\"rectange1\"\n    x={20}\n    y={20}\n    width={50}\n    height={50}\n    fill=\"red\"\n    draggable\n  />\n);\n\nconst Rect2 = () => (\n  <Rect\n    name=\"rectange2\"\n    x={60}\n    y={120}\n    width={50}\n    height={50}\n    fill=\"green\"\n    draggable\n  />\n);\n\nclass TransformerComponent extends React.Component {\n  componentDidMount() {\n    this.checkNode();\n  }\n  componentDidUpdate() {\n    this.checkNode();\n  }\n  checkNode() {\n    const stage = this.transformer.getStage();\n    const { selectedShapeName } = this.props;\n    console.log(this.props)\n    const selectedNode = stage.findOne(\".\" + selectedShapeName);\n    if (selectedNode === this.transformer.node()) {\n      return;\n    }\n    if (selectedNode) {\n      this.transformer.attachTo(selectedNode);\n    } else {\n      this.transformer.detach();\n    }\n    this.transformer.getLayer().batchDraw();\n  }\n  render() {\n    return (\n      <Transformer\n        ref={node => {\n          this.transformer = node;\n        }}\n      />\n    );\n  }\n}\n\n// import konva from 'react-konva'\n\nexport class Rectangulo extends React.Component {\n  state = {\n    selectedShapeName: \"\"\n  };\n\n  handleStageClick = e => {\n    this.setState({\n      selectedShapeName: e.target.name()\n    });\n  };\n\n  render() {\n    return (\n      <Stage\n        width={window.innerWidth}\n        height={window.innerHeight}\n        onClick={this.handleStageClick}\n      >\n        <Layer>\n          <Rect1 />\n          <Rect2 />\n          <TransformerComponent\n            selectedShapeName={this.state.selectedShapeName}\n          />\n        </Layer>\n      </Stage>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { Rectangulo } from '../pruebaCuadrados'\nexport class Index extends Component {\n\n    render() {\n        return (\n            <div>\n                <div className='explain-book'>\n                    <figure >\n                        <img src=\"https://res.cloudinary.com/lulas/image/upload/v1560246748/ilustraciones/fondos%20paisajes/montan%CC%83as-tonos-naranja_labxqa.jpg\" alt=\"montañas\" />\n                    </figure>\n\n                </div>\n                <Rectangulo />\n            </div>\n\n        )\n    }\n}","\nimport axios from 'axios'\n\nexport default class services {\n\n    constructor() {\n\n        this.service = axios.create({\n            baseURL: `${process.env.REACT_APP_URL}auth`,\n            withCredentials: true\n        })\n    }\n\n    signup = (username, email, password) => {\n        return this.service.post('/signup', { username, email, password })\n            .then(response => response.data)\n            .catch(err => console.log(err))\n    }\n\n    login = (username, password) => {\n        console.log(username, password)\n        return this.service.post('/login', { username, password })\n            .then(response => response.data)\n    }\n\n    logout = () => {\n        return this.service.post('/logout', {})\n            .then(response => response.data)\n    }\n\n    loggedin = () => {\n        return this.service.get('/loggedin')\n            .then(response => response.data)\n    }\n\n}\n\n\n\n","import React, { Component } from 'react'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport FormControl from 'react-bootstrap/FormControl'\nimport AuthServices from './../../../services/auth-services'\n\n\n\nexport class SingUp extends Component{\n    constructor(props, context) {\n        super(props, context);\n    \n        this.handleShow = this.handleShow.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n    \n        this.state = {\n          user: {\n            username: '',\n            email: '',\n            password: '',\n          },\n          show: false\n          \n        }\n        this.services = new AuthServices()\n      }\n    \n      handleClose() {\n        this.setState({ show: false });\n      }\n    \n      handleShow() {\n        this.setState({ show: true });\n      }\n\n      \n    \n\n      handleChange = e => {\n        const { name, value } = e.target;\n        this.setState({ \n          user:{\n            ...this.state.user,\n            [name]: value \n          }\n        })\n      }\n\n      \n\n      handleSubmit = e => {\n          console.log(this.state.user)\n          e.preventDefault()\n          const { username, email,  password } = this.state.user\n          this.services.signup(username, email, password)\n              .then(response => {\n                  this.setState({ user:{username: '', email: '', password: ''}})\n                  this.props.setTheUser(response)\n                  console.log(this.state.user)\n              })\n              .catch(error => console.log(error))\n      }\n    \n      render() {\n        return (\n          <>\n            <Button variant=\"light\" onClick={this.handleShow}>\n              Registro\n            </Button>\n    \n            <Modal show={this.state.show} onHide={this.handleClose}>\n              <Modal.Header closeButton>\n                <Modal.Title>Nuevo usuario</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                \n                    <form   onSubmit={this.handleSubmit}  >\n                        <InputGroup className=\"mb-3\">\n                            <InputGroup.Prepend>\n                              <InputGroup.Text id=\"basic-addon1\">☺</InputGroup.Text>\n                            </InputGroup.Prepend>\n                            <FormControl\n                              as='input'\n                              type='text'\n                              onChange={this.handleChange}\n                              value={this.state.user.username}\n                              name='username'\n                              placeholder=\"Username\"\n                              aria-label=\"Username\"\n                              aria-describedby=\"basic-addon1\"\n                            />\n                        </InputGroup>\n                        <InputGroup className=\"mb-3\">\n                            <InputGroup.Prepend>\n                              <InputGroup.Text id=\"basic-addon1\">✉</InputGroup.Text>\n                            </InputGroup.Prepend>\n                            <FormControl\n                              as='input'\n                              type='text'\n                              onChange={this.handleChange}\n                              value={this.state.user.email}\n                              name='email'\n                              placeholder=\"example@example.com\"\n                              aria-label=\"email\"\n                              aria-describedby=\"basic-addon1\"\n                            />\n                        </InputGroup>\n                        <InputGroup className=\"mb-3\">\n                            <InputGroup.Prepend>\n                              <InputGroup.Text id=\"basic-addon1\">✎</InputGroup.Text>\n                            </InputGroup.Prepend>\n                            <FormControl\n                              as='input'\n                              type='password'                              \n                              onChange={this.handleChange}\n                              value={this.state.user.password}\n                              name='password'\n                              placeholder=\"******\"\n                              aria-label=\"Password\"\n                              aria-describedby=\"basic-addon1\"\n                            />\n                        </InputGroup>\n                        <Button \n                        type='submit'\n                        variant=\"info\" \n                        onClick={this.handleClose} >\n                          Unirse\n                        </Button>\n                    </form>\n              </Modal.Body>\n            <Button variant=\"danger \" size='sm' onClick={this.handleClose}>\n              Cerrar\n            </Button>\n        </Modal>\n      </>\n    );\n  }\n\n}\n\n\n\n\n\n\n\n\n\n\n\nexport class Login extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.handleShow = this.handleShow.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n\n    this.state = {\n      user:{\n        username: '',\n        password: ''\n      },\n      show: false\n    }\n    this.services = new AuthServices()\n  }\n\n  handleClose() {\n    this.setState({ show: false });\n  }\n\n  handleShow() {\n    this.setState({ show: true });\n  }\n\n\n\n  handleChange = e => {\n    const { name, value } = e.target;\n    this.setState({ \n      user:{\n        ...this.state.user,\n        [name]: value \n      }\n    })\n  }\n\n\n  handleSubmit = e => {\n\n      e.preventDefault()\n      const { username, password } = this.state.user\n      console.log(username, password)\n      this.services.login(username, password)\n          .then(response => {\n              this.setState({ username: '', password: '' })\n              \n              this.props.setTheUser(response)\n          })\n          .catch(error => console.log(error))\n  }\n\n\n  render() {\n    return (\n      <>\n        <Button variant=\"light\" onClick={this.handleShow}>\n          Login\n        </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Tus datos</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <form onSubmit={this.handleSubmit}>\n              <InputGroup className=\"mb-3\">\n                <InputGroup.Prepend>\n                  <InputGroup.Text id=\"basic-addon1\">☺</InputGroup.Text>\n                </InputGroup.Prepend>\n                <FormControl\n                  as='input'\n                  type='text'                              \n                  onChange={this.handleChange}\n                  value={this.state.user.username}\n                  name='username'\n                  placeholder=\"Usuario\"\n                  aria-label=\"Username\"\n                  aria-describedby=\"basic-addon1\"\n                />\n              </InputGroup>\n\n              <InputGroup className=\"mb-3\">\n                <InputGroup.Prepend>\n                  <InputGroup.Text id=\"basic-addon1\">✎</InputGroup.Text>\n                </InputGroup.Prepend>\n                <FormControl\n                  as='input'\n                  onChange={this.handleChange}\n                  value={this.state.user.password}\n                  name='password'\n                  type='password'\n                  placeholder=\"******\"\n                  aria-label=\"Password\"\n                  aria-describedby=\"basic-addon1\"\n                />\n              </InputGroup>\n            <Button type='submit' variant=\"primary\" onClick={this.handleClose}>\n              Entrar\n            </Button>\n            </form>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={this.handleClose}>\n              Cerrar\n                </Button>\n          </Modal.Footer>\n        </Modal>\n      </>\n    );\n  }\n}\n\n\n\n\n\n\n\n\n","import React, { Component } from 'react'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport FormControl from 'react-bootstrap/FormControl'\nimport BookServices from '../../services/book-service'\nimport {Redirect} from 'react-router-dom'\n\n\nexport default class BookForm extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.handleShow = this.handleShow.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n\n    this.state = {\n      name: '',\n      book_id: '',\n      show: false,\n      redirect: false,\n    };\n    this.services = new BookServices()\n  }\n\n  \n  setRedirect = () => {\n    this.setState({\n      redirect: true\n    })\n    this.handleClose()\n  }\n\n  \n  renderRedirect = () => {\n    if (this.state.redirect) {\n      return <Redirect to='/tales-editor' />\n    }\n  }\n\n\n  handleClose() {\n    this.setState({ show: false });\n  }\n\n  handleShow() {\n    this.setState({ show: true });\n  }\n\n\n  handleChange = e => {\n    const { name, value } = e.target;\n    this.setState({\n      [name]: value\n\n    })\n  }\n\n\n\n\n  handleSubmit = e => {\n    console.log('submit')\n    const theName = this.state.name\n    e.preventDefault()\n    this.services.postNewBook({ name: theName })\n      // .then(res=>console.log(res))\n      .then(res => {\n        console.log(res)\n        this.props.setTheBookId(res._id)\n        this.setState({\n          book_id: res._id\n        })\n\n        //Función desde tales editor para liftUp state\n        // window.location.href = '/tales-editor'\n      }) //RECARGA LA PÁGINA!!!!  \n  }\n\n\n  render() {\n    return (\n      <>\n        <Button variant=\"light\" onClick={this.handleShow}>\n          Crear cuento\n          </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Tu cuento</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <form onSubmit={this.handleSubmit}>\n              <InputGroup className=\"mb-3\">\n                <InputGroup.Prepend>\n                  <InputGroup.Text id=\"basic-addon1\">✎</InputGroup.Text>\n                </InputGroup.Prepend>\n                <FormControl\n                  as='input'\n                  type='text'\n                  onChange={this.handleChange}\n                  value={this.state.name}\n                  name='name'\n                  placeholder=\"Las aventuras de unos patos bien locos\"\n                  aria-label=\"name\"\n                  aria-describedby=\"basic-addon1\"\n                />\n              </InputGroup>\n              {this.renderRedirect()}\n              <Button type='submit' variant=\"primary\" onClick={this.setRedirect}>\n                Crear\n              </Button>\n            </form>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={this.handleClose}>\n              Cerrar\n              </Button>\n          </Modal.Footer>\n        </Modal>\n      </>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport { SingUp, Login } from './Inicio/auth/logForms'\nimport BookForm from './Inicio/BookForm'\nimport Button from 'react-bootstrap/Button'\nimport AuthServices from '../services/auth-services'\n\n\n\nexport class NavBar extends Component {\n\n    constructor(props) {\n        super(props)\n        this.service = new AuthServices()\n    }\n\n    logout = () => {\n        this.service.logout()\n            .then(x => {\n                // console.log('logged out')\n                this.props.setTheUser(null)\n            })\n    }\n\n    render() {\n        return (\n\n            <nav>\n                <ul>\n                    <li className='lis'><Link className='links' to='/'><h3>MuchoCuento</h3></Link></li>\n                    <li className='lis' ><Link className='links' to='/'><Button>Home</Button></Link></li>\n                    <li className='lis'><BookForm setTheBookId={this.props.setTheBookId} /></li>\n\n\n\n                    {this.props.user ? <li className='lis'><Button onClick={this.logout}>Logout </Button></li> :\n\n                        <li className='lis'><SingUp setTheUser={this.props.setTheUser} /> <Login setTheUser={this.props.setTheUser} /> </li>\n                    }\n\n                    {this.props.user ? <li> <Link to={`/prof/private/profile/${this.props.user._id}`} className='links'> Perfil</Link> </li> : null}\n\n\n\n\n\n                </ul>\n            </nav>\n        )\n    }\n}","import axios from 'axios'\n\nexport default class services {\n\n  constructor() {\n\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_URL}prof`,\n      withCredentials: true\n    })\n  }\n\n\n  uploadProfile = (theFile, id) => {\n    console.log(\"Services, mira a ver el id\", id)\n    return this.service.post(`/private/profile/${id}`, theFile)\n      .then(response => response.data)\n      .catch(err => console.log(err))\n  }\n}","import React, { Component } from 'react'\nimport { Button } from 'react-bootstrap'\nimport { Redirect } from 'react-router-dom'\n\n\nexport class BookCard extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      redirect: false\n    }\n  }\n\n  setRedirect = () => {\n    this.setState({\n      redirect: true\n    })\n\n    setTimeout(() => {\n\n      this.renderRedirect()\n    }, 1000);\n    // console.log('setRedirect')\n\n  }\n\n\n  renderRedirect = () => {\n    // console.log('redireccionando')\n\n    if (this.state.redirect) {\n      // console.log(\"entro el redirect\")\n      return <Redirect to='/' />\n    }\n  }\n\n\n  render() {\n    return (\n      <div className=\"card-image\">\n        <article className=\"card\">\n          <header className=\"card-body\">\n            <h5 className=\"card-title\">{this.props.name}</h5>\n            <Button variant=\"outline-success\" onClick={this.setRedirect} >Leer cuento</Button>\n          </header>\n        </article>\n      </div>\n    )\n  }\n}\n// onClick={this.handleView}","import React, { Component } from 'react'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport FormControl from 'react-bootstrap/FormControl'\nimport BookServices from '../../services/book-service'\nimport { BookCard } from './Book-card'\n\n\nexport class SearchBooks extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.handleShow = this.handleShow.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.searchBook = this.searchBook.bind(this);\n\n\n    this.state = {\n      books: [],\n      searchBook: [],\n      search: \"\",\n\n      show: false,\n      query: \"\",\n    }\n    this.services = new BookServices()\n  }\n\n  componentDidMount() {\n    this.services.booksList()\n      .then(allBooks => this.setState({ books: allBooks }))\n  }\n\n  searchBook(e) {\n    // console.log(this.state.books)\n    this.setState({ query: e.target.value })\n    let searchBook = this.state.books.filter(book => book.name.includes(e.target.value))\n    // console.log(searchBook)\n    this.setState({ searchBook })\n  }\n\n\n  handleClose() {\n    this.setState({ show: false });\n  }\n\n  handleShow() {\n    this.setState({ show: true });\n  }\n\n  render() {\n    // console.log(this.state)\n    return (\n      <>\n        <Button className='horror-button' variant=\"light\" onClick={this.handleShow}>\n          Buscar cuentos\n        </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n\n          <Modal.Header closeButton>\n            <Modal.Title>Todos los cuentos</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <InputGroup className=\"mb-3\">\n              <InputGroup.Prepend>\n                <InputGroup.Text id=\"basic-addon1\">⌨</InputGroup.Text>\n              </InputGroup.Prepend>\n              <FormControl\n                placeholder=\"Buscar cuentos\"\n                aria-label=\"books\"\n                aria-describedby=\"basic-addon1\"\n                value={this.state.query}\n                onChange={this.searchBook}\n              />\n            </InputGroup>\n            <div>\n\n              {this.state.query.length ?\n\n                this.state.searchBook.map((book, idx) => <BookCard key={idx} {...book} />)\n\n                :\n\n                this.state.books.map((book, idx) => <BookCard key={idx} {...book} />)\n\n              }\n\n            </div>\n          </Modal.Body>\n\n        </Modal>\n      </>\n    );\n  }\n\n}","import React, { Component } from 'react'\nimport { Button } from 'react-bootstrap';\nimport ProfileService from '../../services/profile-services'\n\n\n\n\n\nexport class UserInfo extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            user_id: this.props.user.user_id,\n            profilePhoto: this.props.user.profilePhoto,\n            username: this.props.user.username,\n            email: this.props.user.email,\n        }\n        console.log(this.props.user.user_id)\n        this.services = new ProfileService()\n    }\n      \n\n    handleChange = (e) => {\n        const { name, value } = e.target\n\n        this.setState({\n            [name]: value\n        })\n    }\n    \n    \n    \n    handleFileUpload = e => {\n        \n        const uploadData = new FormData();\n        uploadData.append(\"imageUrl\", e.target.files[0]);\n        for (let prop of uploadData.entries()){\n            console.log(prop[0])\n            console.log(prop[1])\n        }\n\n        this.setState({\n            data: uploadData,\n        })        \n        \n    }\n\n\n\n    handleSubmit=(e)=>{\n        e.preventDefault()\n        this.services.uploadProfile(this.state.data, this.state.user_id)\n        .then(response => {\n            console.log(response)\n            this.setState({\n                ...this.state,\n                profilePhoto: response.profilePhoto\n            })\n        })\n    }\n    \n\n    handleUser=e=>{\n        e.preventDefault()\n        \n    }\n\n\n    render() {\n        return (\n\n           <div>   \n               <figure className='profile-photo'>\n                    <img src={this.state.profilePhoto} alt=\"profile-images\"/>\n                </figure> \n\n                <form onSubmit={(e) => this.handleSubmit(e, \"imageURL\")} className='toolbar'>\n                    <input onChange={this.handleFileUpload} type=\"file\" name=\"imageURL\" id=\"imageURL\" placeholder='Elige imagen' /> <br />\n                    {this.state.data && <Button type='submit'>Cambiar imagen de perfil</Button>}<br />\n                </form>\n\n\n                <form onSubmit={this.handleUser}>\n                    <label> Cambiar nombre de usuario <br/>\n                        <input type=\"text\" name='username' value={this.state.username} placeholder={this.state.username} onChange={this.handleChange}/>\n                    </label><br/>\n                    <label> Cambiar email<br/>\n                        <input type=\"text\" name='email' value={this.state.email} placeholder={this.state.email} onChange={this.handleChange}/>\n                    </label><br/>\n                    <button>Guardar cambios</button>\n                </form>\n                <Button onClick={this.props.close}>Cerrar</Button>\n            </div>\n        )\n    }\n}\n\n\n\n\n\n\n\n","import React, { Component } from 'react'\nimport GalleryServices from '../../services/profile-services'\nimport { SearchBooks } from './BookSearch';\nimport { UserInfo } from './User-info'\nimport { Button } from 'react-bootstrap'\n\nexport class Profile extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            user_id: this.props.loggedInUser._id,\n            profilePhoto: this.props.loggedInUser.profilePhoto,\n            username: this.props.loggedInUser.username,\n            email: this.props.loggedInUser.email,\n            password: this.props.loggedInUser.password,\n            show: false\n        }\n        this.services = new GalleryServices()\n    }\n\n\n    handleChange = (e) => {\n        const { name, value } = e.target\n\n        this.setState({\n            [name]: value\n        })\n    }\n\n    handleFileUpload = e => {\n\n        const uploadData = new FormData();\n        uploadData.append(\"imageUrl\", e.target.files[0]);\n\n        this.setState({\n            data: uploadData\n        })\n\n        // console.log(this.state)\n\n    }\n\n\n    handleSubmit = (e) => {\n        e.preventDefault()\n        // console.log('handleSubmit', e.target)\n\n\n        this.services.uploadProfile(this.state.data)\n            .then(response => {\n                // console.log(response.imageURL)    \n                this.setState({\n                    profilePhoto: response.imageURL\n                })\n                this.services.updatePhoto(this.state.profilePhoto, this.state.user_id)\n                    .then(res => console.log(res))\n            })\n    }\n\n    handleShow = () => {\n        this.setState({\n            show: true\n        })\n    }\n\n\n    handleClose = () => {\n        this.setState({\n            show: false\n        })\n    }\n\n    render() {\n        // console.log(this.props.loggedInUser.profilePhoto)\n        return (\n            <div>\n            <h1>Bienvenido, {this.props.loggedInUser.username}</h1>\n            <div className='user-info'>\n                \n                <Button className='horror-button'onClick={this.handleShow}>Información de usuario</Button>\n                {this.state.show ? <UserInfo user={this.state} close={this.handleClose}/> : null}\n              \n                <SearchBooks />\n            </div>\n            </div>\n\n        )\n    }\n}","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst protectedRoute = ({ component: Component, user, ...rest }) => {\n\n    return (\n        <Route\n            {...rest}\n            render={props => {\n                if (user) {\n                    return <Component {...props} loggedInUser={user} />\n                } else {\n                    return <Redirect to={{ pathname: '/' }} />\n                }\n            }\n            }\n        />\n    )\n}\nexport default protectedRoute","import React, { Component } from 'react';\nimport './App.css';\nimport { TalesEditor } from './components/TaleEditor/stateful/TalesEditor';\nimport { Switch, Route } from 'react-router-dom'\nimport { Index } from './components/Inicio/Index';\nimport { NavBar } from './components/NavBar';\nimport AuthServices from './services/auth-services'\nimport { Profile } from './components/Profile/Profile';\nimport ProtectedRoute from './components/protected-route'\n\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { loggedInUser: null, bookId: undefined }\n    this.services = new AuthServices()\n  }\n\n  setUser = userObj => this.setState({ loggedInUser: userObj })\n\n  fetchUser = () => {\n    if (this.state.loggedInUser === null) {\n      this.services.loggedin()\n        .then(response => this.setState({ loggedInUser: response }))\n        .catch(x => this.setState({ loggedInUser: false }))\n    }\n  }\n\n  setTheBookId = bookId => {\n    // console.log(bookId)\n    this.setState({ bookId })\n  }\n  getTheBookId = () => {\n    // console.log(this.state.bookId)\n    return this.state.bookId\n  }\n\n\n  render() {\n\n    this.fetchUser()\n\n\n\n\n\n    return (\n      <main>\n\n        <NavBar setTheBookId={this.setTheBookId} setTheUser={this.setUser} user={this.state.loggedInUser} />\n\n        <Switch>\n          <Route path=\"/\" exact component={Index} />\n          <Route path=\"/tales-editor\" exact render={() => <TalesEditor user={this.state.loggedInUser} getTheBookId={this.state.bookId} />} />\n          <ProtectedRoute path={`/prof/private/profile/:_id`} exact component={Profile} user={this.state.loggedInUser} setTheUser={this.setUser} />\n        </Switch>\n\n      </main>\n\n    );\n  }\n}\n\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter as Router} from 'react-router-dom'\n\n\nReactDOM.render((\n    <Router>\n        <App />\n    </Router>\n), document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}